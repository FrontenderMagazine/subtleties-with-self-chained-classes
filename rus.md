# Тонкости с самозамыкающимися классами

Это короткая публикация переписки по электронной почте с моим клиентом, который спрашивал небольшой совет относительно самозамыкающихся класов (например `.foo.foo {}`).

Вопрос в основном был о количестве 'ссылкок' в цепи и их отношении, если такие имеются, к числу раз когда этот класс применяется к HTML.

То есть `.foo.foo {}` приравнивается ли по специфичности к `class="foo foo"`,
`.foo.foo.foo {}` к `class="foo foo foo"` и так далее?

**Клиент:**

> Привет,
>
> Надеюсь, с тобой все хорошо.
>
> Я хотел уточнить у тебя один вопрос касательно CSS: Я был убежден, что текст отобразится тремя разными цветами, но это не так (они все синие) и я не могу найти никакого объяснения этому в сети:
>
>     .column { color: red; }
>     .column.column { color: green; }
>     .column.column.column { color: blue; }
>
>
> Демо: [jsfiddle.net/otk9661u][1].
>
> Почему так происходит?

**Я:**

> Привет!
>
> Все хорошо, спасибо. В работаю солночном Лондоне. Как сам? Как остальные…?
>
> Хмм. Это забавно! Удивлен, что все это один и тот-же селектор.
>
> `.color {}` спрашивает ‘Есть ли класс `color`?’
>
> `.color.color {}` не спрашивает ‘Есть ли два класса `color`?’, он просто спрашивает тот-же вопрос дважды. Он ничего не 'подсчитывает' в HTML.
> Это тонкое, но, как мы выяснили, важно различие!
>
>
> Если вы хотите стилизовать основываясь на ‘подсчете’ количества классов в вашей разметке, вы можете написать вот так:
>
>
>     [class="column"] { color: red; }
>     [class="column column"] { color: green; }
>     [class="column column column"] { color: blue; }
>
>
> Демо: [jsfiddle.net/ssj4recq][2].
>
> Это даст ожидаемый результат, так как все три селектора имеют одинаковую специфичность. Вы помните, из раздела workshop, как самозамыкающиеся классы [увеличивает специфичность][3] селектора? Чтож, хорошо что подобного эффекта здесь не будет.
>
> Так где это можно использовать? Выглядит немного странно, если честно. :P
> Естественно, я рекомендовал бы избегать такой метод.
>

Так что да. Сцепленные класы в действительности не считают  количество классов в вашей разметке, они просто задают один и тот-же вопрос несколько раз.

Если, по каким-либо причинам, вам нужно ‘посчитать‘ число классов , вы будите должны жестко указать селектор атрибута с точным числом. Но такая конструкция будет весьма ненадёжна, так как пробелы это строка, поэтому если ваш шаблон перенесет классы на новою строку (или что-то вроде этого), то строка не совпадет с селектором. Плюс, технически мы не подсчитываем ничего: мы смотрим на соответствие строки.

[1]: https://jsfiddle.net/otk9661u/
[2]: https://jsfiddle.net/ssj4recq/1/
[3]: http://csswizardry.com/2014/07/hacks-for-dealing-with-specificity/
[4]: http://csswizardry.com/work/
[5]: https://thenetawards.com/previous-winners/
[6]: http://csswizardry.com/archive/
[7]: http://twitter.com/csswizardry
